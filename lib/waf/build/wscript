#! /usr/bin/env python
# encoding: utf-8

VERSION = '0.0.2'
APPNAME = 'build_bench'
top  = '.'
out  = 'out'

def configure(conf):
	conf.load('g++')

def build(bld):
	for i in xrange(13):
		filez = ' '.join(['lib_%d/class_%d.cpp' % (i, j) for j in xrange(100)])
		bld.stlib(
			source = filez,
			target = 'lib_%d' % i,
			includes = '.', # include the top-level
		)

	# disables the calls to gcc to measure the subprocess performance
	from waflib import Task
	def run_override(self):
		return bld.exec_command('touch %s' % self.outputs[0].abspath())
	Task.classes['cxx'].run = run_override
	Task.classes['cxxstlib'].run = run_override


